{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/fees.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/fees.vue","mtime":1564235953189},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, NoResults, ErrorBanner, AppButton, ButtonGroup, InputValidate, Modal, AppTable, Pagination, SelectValidate, InputField } from '@/components';\nimport { IFee, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    NoResults,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    InputValidate,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    SelectValidate,\n    ConfirmationModal,\n    InputField\n  }\n})\nexport default class Fees extends Vue {\n  fees: IFee[] = [];\n  editItem: IFee = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Amount', slotName: 'amount' },\n    { label: 'Type', selector: 'type' },\n    { label: 'Actions', slotName: 'actions' },\n  ];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: IFee = {};\n\n  created() {\n    this.getFees();\n    this.resetEditItem();\n  }\n\n  getFees() {\n    api.get('fee/all').then( resp => {\n      this.fees = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = {};\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('fee/', this.editItem).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('fee/' + this.editItem.id, this.editItem).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteFee() {\n    api.delete('fee/' + this.deleteItem.id).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n",{"version":3,"sources":["fees.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fees.vue","sourceRoot":"src/pages/configuration","sourcesContent":["<template>\n  <div>\n    <error-banner v-model=\"errorList\" />\n    <div class=\"toolbar\">\n      <app-button class=\"btn-push-right\" btnStyle=\"success\" icon=\"plus-circle\" @click=\"openModal()\">New Fee</app-button>\n    </div>\n    <panel title=\"Fees\">\n      <app-table :columns=\"columns\" :records=\"fees\">\n        <span slot=\"amount\" slot-scope=\"{record}\">\n          <span v-if=\"record.type === 'AMOUNT'\">{{ record.amount | currency }}</span>\n          <span v-if=\"record.type === 'PERCENTAGE'\">{{ record.amount }}%</span>\n        </span>\n        <span slot=\"actions\" slot-scope=\"{record}\">\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"showConfirm(record)\" icon=\"trash-alt\" />\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"openModal(record)\" icon=\"edit\" />\n        </span>\n      </app-table>\n      <pagination :totalRecords=\"fees.length\" />\n    </panel>\n    <modal title=\"Fee\" :open=\"showModal\">\n      <validation-observer ref=\"form\">\n        <form @submit.prevent=\"submitForm\">\n          <div class=\"row\">\n            <div class=\"col-md-5\">\n              <input-validate label=\"Name\" name=\"name\" rules=\"required\" v-model=\"editItem.name\" />\n            </div>\n            <div class=\"col-md-4\">\n              <select-validate label=\"Type\" name=\"type\" :options=\"['AMOUNT', 'PERCENTAGE']\" rules=\"required\" v-model=\"editItem.type\" />\n            </div>\n            <div class=\"col-md-3\">\n              <input-validate label=\"Amount\" name=\"amount\" rules=\"required\" inputType=\"number\" :numberStep=\".01\" v-model=\"editItem.amount\" />\n            </div>\n          </div>\n          <button-group>\n            <app-button @click=\"closeModal\" btnStyle=\"info-link\">Cancel</app-button>\n            <app-button btnType=\"submit\">Submit</app-button>\n          </button-group>\n        </form>\n      </validation-observer>\n    </modal>\n    <confirmation-modal v-if=\"deleteItem\" @cancel=\"showConfirmModal = false\" @confirm=\"deleteFee\" :open=\"showConfirmModal\">\n      Are you sure you want to delete {{ deleteItem.name }}?\n    </confirmation-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, NoResults, ErrorBanner, AppButton, ButtonGroup, InputValidate, Modal, AppTable, Pagination, SelectValidate, InputField } from '@/components';\nimport { IFee, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    NoResults,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    InputValidate,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    SelectValidate,\n    ConfirmationModal,\n    InputField\n  }\n})\nexport default class Fees extends Vue {\n  fees: IFee[] = [];\n  editItem: IFee = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Amount', slotName: 'amount' },\n    { label: 'Type', selector: 'type' },\n    { label: 'Actions', slotName: 'actions' },\n  ];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: IFee = {};\n\n  created() {\n    this.getFees();\n    this.resetEditItem();\n  }\n\n  getFees() {\n    api.get('fee/all').then( resp => {\n      this.fees = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = {};\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('fee/', this.editItem).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('fee/' + this.editItem.id, this.editItem).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteFee() {\n    api.delete('fee/' + this.deleteItem.id).then( resp => {\n      this.getFees();\n      this.$toast.success('Fee Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n</script>\n"]}]}