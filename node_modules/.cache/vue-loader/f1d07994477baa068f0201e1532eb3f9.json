{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/statuses.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/statuses.vue","mtime":1564235953189},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, NoResults, ErrorBanner, AppButton, ButtonGroup, InputValidate, Modal, AppTable, Pagination, SelectBox, InputField } from '@/components';\nimport { IStatus, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    NoResults,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    InputValidate,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    SelectBox,\n    ConfirmationModal,\n    InputField\n  }\n})\nexport default class Statuses extends Vue {\n  statuses: IStatus[] = [];\n  editItem: IStatus = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Type', selector: 'type' },\n    { label: 'Actions', slotName: 'actions' },\n  ];\n  types = ['Product', 'Order', 'Active', 'Inactive', 'Prototype'];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: IStatus = {};\n\n  created() {\n    this.getStatuses();\n    this.resetEditItem();\n  }\n\n  getStatuses() {\n    api.get('status/all').then( resp => {\n      this.statuses = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = {};\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('status/', this.editItem).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('status/' + this.editItem.id, this.editItem).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteStatus() {\n    api.delete('status/' + this.deleteItem.id).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n",{"version":3,"sources":["statuses.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"statuses.vue","sourceRoot":"src/pages/configuration","sourcesContent":["<template>\n  <div>\n    <error-banner v-model=\"errorList\" />\n    <div class=\"toolbar\">\n      <app-button class=\"btn-push-right\" btnStyle=\"success\" icon=\"plus-circle\" @click=\"openModal()\">New Status</app-button>\n    </div>\n    <panel title=\"Statuses\">\n      <app-table :columns=\"columns\" :records=\"statuses\">\n        <span slot=\"actions\" slot-scope=\"{record}\">\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"showConfirm(record)\" icon=\"trash-alt\" />\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"openModal(record)\" icon=\"edit\" />\n        </span>\n      </app-table>\n      <pagination :totalRecords=\"statuses.length\" />\n    </panel>\n    <modal title=\"Status\" :open=\"showModal\">\n      <validation-observer ref=\"form\">\n        <form @submit.prevent=\"submitForm\">\n          <div v-if=\"editItem\">\n            <div class=\"row\">\n              <div class=\"col-md-6\">\n                <input-validate name=\"name\" label=\"Name\" rules=\"required\" v-model=\"editItem.name\" />\n              </div>\n              <div class=\"col-md-6\">\n                <select-box name=\"type\" :options=\"types\" label=\"Type\" v-model=\"editItem.type\" />\n              </div>\n            </div>\n          </div>\n          <button-group>\n            <app-button @click=\"closeModal\" btnStyle=\"info-link\">Cancel</app-button>\n            <app-button btnType=\"submit\">Submit</app-button>\n          </button-group>\n        </form>\n      </validation-observer>\n    </modal>\n    <confirmation-modal v-if=\"deleteItem\" @cancel=\"showConfirmModal = false\" @confirm=\"deleteStatus\" :open=\"showConfirmModal\">\n      Are you sure you want to delete {{ deleteItem.name }}?\n    </confirmation-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, NoResults, ErrorBanner, AppButton, ButtonGroup, InputValidate, Modal, AppTable, Pagination, SelectBox, InputField } from '@/components';\nimport { IStatus, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    NoResults,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    InputValidate,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    SelectBox,\n    ConfirmationModal,\n    InputField\n  }\n})\nexport default class Statuses extends Vue {\n  statuses: IStatus[] = [];\n  editItem: IStatus = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Type', selector: 'type' },\n    { label: 'Actions', slotName: 'actions' },\n  ];\n  types = ['Product', 'Order', 'Active', 'Inactive', 'Prototype'];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: IStatus = {};\n\n  created() {\n    this.getStatuses();\n    this.resetEditItem();\n  }\n\n  getStatuses() {\n    api.get('status/all').then( resp => {\n      this.statuses = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = {};\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('status/', this.editItem).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('status/' + this.editItem.id, this.editItem).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteStatus() {\n    api.delete('status/' + this.deleteItem.id).then( resp => {\n      this.getStatuses();\n      this.$toast.success('Status Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n</script>\n"]}]}