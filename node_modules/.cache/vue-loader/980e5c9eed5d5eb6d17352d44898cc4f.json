{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/product-order-details.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/product-order-details.vue","mtime":1564235953188},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport {\n  Panel,\n  AppTable,\n  AppButton,\n  ErrorBanner,\n  TitleBar,\n  ListGroup,\n  ListGroupItem,\n  Modal,\n  FeeInput,\n  FeeEditor,\n  SectionTitle,\n  ButtonGroup,\n  Badge,\n  NoResults,\n  Accordion,\n  AccordionItem,\n  Counter,\n  SliderPanel,\n  Tab,\n  DataImage,\n  InputField,\n  InputValidate,\n  StatusSelect,\n  DatePicker\n} from '@/components';\nimport { ConfirmationModal } from '@/patterns';\nimport api from '@/api';\nimport { IProductOrder, IFee, IProduct } from '@/interfaces';\nimport ProductOrderSummary from './product-order-summary.vue';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    AppButton,\n    ErrorBanner,\n    ConfirmationModal,\n    TitleBar,\n    ListGroup,\n    ListGroupItem,\n    Modal,\n    FeeInput,\n    FeeEditor,\n    SectionTitle,\n    ButtonGroup,\n    NoResults,\n    Accordion,\n    AccordionItem,\n    Badge,\n    Counter,\n    SliderPanel,\n    Tab,\n    DataImage,\n    InputField,\n    InputValidate,\n    StatusSelect,\n    ProductOrderSummary,\n    DatePicker\n  }\n})\nexport default class ProductOrderDetails extends Vue {\n  order: IProductOrder = {};\n  errorList: string[] = [];\n  showConfirmModal = false;\n  editOrder: IProductOrder = {};\n  showEditModal = false;\n  editFeeOptions = false;\n  selectedProduct: IProduct = {};\n  showProdDetails = false;\n  productColumns = [\n    { label: 'Quantity', slotName: 'count' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp' },\n    { label: 'Status', slotName: 'status' }\n  ];\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  editProdQty = false;\n\n  created() {\n    this.getOrder();\n    this.getProducts();\n  }\n\n  getOrder() {\n    const id = this.$route.params.id;\n    api.get('productorder/' + id).then(resp => {\n      this.order = resp.data;\n    })\n    .catch(error => {\n        this.errorList.push(error);\n    });\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  findCountObj(id) {\n    let prodQty = this.order.productQuantities;\n    return prodQty.find(item => item.product.id === id);\n  }\n\n  getCount(item) {\n    let countItem = this.findCountObj(item.id);\n    return countItem ? countItem.count : 0;\n  }\n\n  changeCount(val, item) {\n    let countItem = this.findCountObj(item.id);\n    let prodQty = this.order.productQuantities;\n    let count = val !== '' ? parseInt(val) : 0;\n    if (countItem) {\n      if (count === 0) {\n        let index = prodQty.findIndex(obj => obj.product.id === item.id);\n        prodQty.splice(index, 1);\n      }\n      else {\n        countItem.count = count;\n      }\n    }\n    else {\n      prodQty.push({ count: count, product: item });\n    }\n  }\n\n  cancelProdEdit() {\n    this.editProdQty = false;\n    this.getOrder();\n  }\n\n  openDetails(product) {\n    this.selectedProduct = product;\n    this.showProdDetails = true;\n  }\n\n  closeDetails(product) {\n    this.selectedProduct = {};\n    this.showProdDetails = false;\n  }\n\n  openEditModal() {\n    this.editOrder = this.order;\n    this.showEditModal = true;\n  }\n\n  closeEditModal() {\n    this.showEditModal = false;\n  }\n\n  submitEdit() {\n    api.put('productorder/' + this.order.id, this.order).then(resp => {\n      this.getOrder();\n      this.$toast.success('Product Order updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeEditModal();\n  }\n\n  showConfirm() {\n    this.showConfirmModal = true;\n  }\n\n  deleteOrder() {\n    api.delete('productorder/' + this.order.id).then(resp => {\n      this.$toast.success('Product Order Deleted');\n      this.getOrder();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n}\n",{"version":3,"sources":["product-order-details.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"product-order-details.vue","sourceRoot":"src/pages/product-orders","sourcesContent":["<template>\n  <div>\n    <title-bar title=\"Product Order Details\" btnBackLabel=\"Product Order History\" routeBack=\"/product-orders\" />\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <div class=\"col-md-5\">\n          <panel title=\"Order Summary\">\n            <app-button slot=\"utility\" btnStyle=\"link\" size=\"xs\" icon=\"edit\" @click=\"openEditModal\"></app-button>\n            <list-group>\n              <list-group-item icon=\"address-card\">\n                Internal Id <span>{{ order.internalId }}</span>\n              </list-group-item>\n              <list-group-item :icon=\"['far', 'calendar']\">\n                Delivery Date <span>{{ order.deliveredOn }}</span>\n              </list-group-item>\n              <list-group-item icon=\"ellipsis-h\">\n                Status <badge badgeType=\"outline\" badgeStyle=\"success\" v-if=\"order.status\">{{ order.status.name }}</badge>\n              </list-group-item>\n            </list-group>\n            <section-title>Fees</section-title>\n            <no-results v-if=\"!order.fees || !order.fees.length\" header=\"No Fees Assigned\" btnLabel=\"Add Fee\"></no-results>\n            <list-group :iconList=\"true\" v-if=\"order.fees && order.fees.length\">\n              <list-group-item v-for=\"(fee, index) in order.fees\" icon=\"receipt\" color=\"yellow\" :key=\"index\">\n                {{fee.name}} <span>{{fee.amount | fee(fee.type)}}</span>\n              </list-group-item>\n            </list-group>\n          </panel>\n          <panel title=\"Product Quantities\">\n            <app-button v-if=\"!editProdQty\" slot=\"utility\" btnStyle=\"link\" size=\"xs\" icon=\"edit\" @click=\"editProdQty = true\"></app-button>\n            <div v-else slot=\"utility\">\n              <app-button v-if=\"editProdQty\" :linkBtn=\"true\" @click=\"cancelProdEdit\">Cancel</app-button>\n              <app-button v-if=\"editProdQty\" @click=\"submitEdit\">Save</app-button>\n            </div>\n            <app-table :columns=\"productColumns\">\n              <tr v-for=\"(record, index) in products\" :key=\"`row-${index}`\" v-if=\"getCount(record) > 0 || editProdQty\">\n                <td>\n                  <counter v-if=\"editProdQty\" :value=\"getCount(record)\" @input=\"(val) => changeCount(val, record)\"></counter>\n                  <badge v-else badgeStyle=\"info\">{{ getCount(record) }}</badge>\n                </td>\n                <td>\n                  <app-button size=\"xs\" btnStyle=\"link\" @click=\"openDetails(record)\">{{record.name}}</app-button>\n                </td>\n                <td>{{ record.msrp }}</td>\n                <td>{{ record.status && record.status.name }}</td>\n              </tr>\n            </app-table>\n          </panel>\n        </div>\n        <div class=\"col-md-7\">\n          <panel title=\"Order Summary\">\n            <no-results v-if=\"!order.productQuantities || !order.productQuantities.length\" header=\"No Products Included\" body=\"Select product quantities from the products table to begin order\" :icon=\"['far', 'truck-loading']\"></no-results>\n            <div v-else>\n              <product-order-summary :order=\"order\" />\n            </div>\n          </panel>\n        </div>\n      </div>\n    </div>\n\n    <slider-panel title=\"Product Details\" :withTabs=\"true\" @close=\"closeDetails\" :open=\"showProdDetails\">\n      <tab title=\"Product Info\" tabKey=\"prod-info\">\n        <data-image v-if=\"selectedProduct.images && selectedProduct.images.length\" :fileName=\"selectedProduct.images[0].name\" />\n        <list-group title=\"Basic Info\">\n          <list-group-item icon=\"address-card\">\n            Name<span>{{selectedProduct.name}}</span>\n          </list-group-item>\n          <list-group-item icon=\"tag\">\n            MSRP<badge>{{selectedProduct.msrp}}</badge>\n          </list-group-item>\n          <list-group-item icon=\"ellipsis-h\">\n            Status<badge badgeType=\"outline\" v-if=\"selectedProduct.status\">{{selectedProduct.status.name}}</badge>\n          </list-group-item>\n        </list-group>\n        <list-group title=\"Fees\">\n          <list-group-item v-for=\"fee in selectedProduct.fees\" color=\"yellow\" icon=\"receipt\" :key=\"`fee-${fee.id}`\">\n            {{fee.name}}<badge>{{fee.amount | fee(fee.type)}}</badge>\n          </list-group-item>\n        </list-group>\n      </tab>\n      <tab title=\"Product Items\" tabKey=\"prod-items\">\n        <list-group>\n          <list-group-item v-for=\"item in selectedProduct.productItemQuantities\" :icon=\"['fal', 'barcode-read']\" :key=\"`prodQty-${item.id}`\">\n            {{item.productItem.name}}<badge badgeStyle=\"info\">{{item.count}}</badge>\n          </list-group-item>\n        </list-group>\n      </tab>\n    </slider-panel>\n\n    <modal title=\"Fees\" :open=\"showEditModal\">\n      <form v-if=\"!editFeeOptions\" @submit.prevent=\"submitEdit\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <input-validate name=\"orderId\" label=\"Order ID\" rules=\"required\" v-model=\"editOrder.internalId\" />\n          </div>\n          <div class=\"col-md-6\">\n            <date-picker label=\"Delivery Date\" v-model=\"editOrder.deliveredOn\" />\n          </div>\n          <div class=\"col-md-6\">\n            <status-select v-model=\"editOrder.status\" />\n          </div>\n          <div class=\"col-md-12\">\n            <fee-input v-model=\"editOrder.fees\" @edit-click=\"editFeeOptions = true\"  />\n          </div>\n        </div>\n        <button-group>\n          <app-button :linkBtn=\"true\" @click=\"closeEditModal\">Cancel</app-button>\n          <app-button btnType=\"submit\">Save</app-button>\n        </button-group>\n      </form>\n      <fee-editor v-else @back-click=\"editFeeOptions = false\" />\n    </modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport {\n  Panel,\n  AppTable,\n  AppButton,\n  ErrorBanner,\n  TitleBar,\n  ListGroup,\n  ListGroupItem,\n  Modal,\n  FeeInput,\n  FeeEditor,\n  SectionTitle,\n  ButtonGroup,\n  Badge,\n  NoResults,\n  Accordion,\n  AccordionItem,\n  Counter,\n  SliderPanel,\n  Tab,\n  DataImage,\n  InputField,\n  InputValidate,\n  StatusSelect,\n  DatePicker\n} from '@/components';\nimport { ConfirmationModal } from '@/patterns';\nimport api from '@/api';\nimport { IProductOrder, IFee, IProduct } from '@/interfaces';\nimport ProductOrderSummary from './product-order-summary.vue';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    AppButton,\n    ErrorBanner,\n    ConfirmationModal,\n    TitleBar,\n    ListGroup,\n    ListGroupItem,\n    Modal,\n    FeeInput,\n    FeeEditor,\n    SectionTitle,\n    ButtonGroup,\n    NoResults,\n    Accordion,\n    AccordionItem,\n    Badge,\n    Counter,\n    SliderPanel,\n    Tab,\n    DataImage,\n    InputField,\n    InputValidate,\n    StatusSelect,\n    ProductOrderSummary,\n    DatePicker\n  }\n})\nexport default class ProductOrderDetails extends Vue {\n  order: IProductOrder = {};\n  errorList: string[] = [];\n  showConfirmModal = false;\n  editOrder: IProductOrder = {};\n  showEditModal = false;\n  editFeeOptions = false;\n  selectedProduct: IProduct = {};\n  showProdDetails = false;\n  productColumns = [\n    { label: 'Quantity', slotName: 'count' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp' },\n    { label: 'Status', slotName: 'status' }\n  ];\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  editProdQty = false;\n\n  created() {\n    this.getOrder();\n    this.getProducts();\n  }\n\n  getOrder() {\n    const id = this.$route.params.id;\n    api.get('productorder/' + id).then(resp => {\n      this.order = resp.data;\n    })\n    .catch(error => {\n        this.errorList.push(error);\n    });\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  findCountObj(id) {\n    let prodQty = this.order.productQuantities;\n    return prodQty.find(item => item.product.id === id);\n  }\n\n  getCount(item) {\n    let countItem = this.findCountObj(item.id);\n    return countItem ? countItem.count : 0;\n  }\n\n  changeCount(val, item) {\n    let countItem = this.findCountObj(item.id);\n    let prodQty = this.order.productQuantities;\n    let count = val !== '' ? parseInt(val) : 0;\n    if (countItem) {\n      if (count === 0) {\n        let index = prodQty.findIndex(obj => obj.product.id === item.id);\n        prodQty.splice(index, 1);\n      }\n      else {\n        countItem.count = count;\n      }\n    }\n    else {\n      prodQty.push({ count: count, product: item });\n    }\n  }\n\n  cancelProdEdit() {\n    this.editProdQty = false;\n    this.getOrder();\n  }\n\n  openDetails(product) {\n    this.selectedProduct = product;\n    this.showProdDetails = true;\n  }\n\n  closeDetails(product) {\n    this.selectedProduct = {};\n    this.showProdDetails = false;\n  }\n\n  openEditModal() {\n    this.editOrder = this.order;\n    this.showEditModal = true;\n  }\n\n  closeEditModal() {\n    this.showEditModal = false;\n  }\n\n  submitEdit() {\n    api.put('productorder/' + this.order.id, this.order).then(resp => {\n      this.getOrder();\n      this.$toast.success('Product Order updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeEditModal();\n  }\n\n  showConfirm() {\n    this.showConfirmModal = true;\n  }\n\n  deleteOrder() {\n    api.delete('productorder/' + this.order.id).then(resp => {\n      this.$toast.success('Product Order Deleted');\n      this.getOrder();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n}\n</script>\n"]}]}