{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/products/all-products.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/products/all-products.vue","mtime":1564234716085},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, AppTable, TitleBar, AppButton, ErrorBanner, DataImage, Pagination, Badge } from '@/components';\nimport { ConfirmationModal } from '@/patterns';\nimport api from '@/api';\nimport { IProduct } from '@/interfaces';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    TitleBar,\n    AppButton,\n    ErrorBanner,\n    DataImage,\n    ConfirmationModal,\n    Pagination,\n    Badge\n  }\n})\nexport default class AllProducts extends Vue {\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  columns = [\n    { label: 'Picture', slotName: 'image', class: 'img-thumbnail' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp', filter: 'currency' },\n    { label: 'Inventory', slotName: 'inventory' },\n    { label: 'Product Identifiers', slotName: 'prodId' },\n    { label: 'Status', slotName: 'status' },\n    { label: 'Last Updated', selector: 'updatedOn', filter: 'date' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  showConfirmModal: boolean = false;\n  deleteObj: IProduct = {};\n\n  created() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n      this.filteredProducts = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  countInventory(inventory, field) {\n    let count = 0;\n    inventory.forEach(item => {\n      count += item[field];\n    });\n\n    return count;\n  }\n\n  changePage(range) {\n    let products = deepCopy(this.products);\n    if(products) {\n      this.filteredProducts = products.splice(range.start, range.end);\n    }\n  }\n\n  showConfirm(obj) {\n    this.deleteObj = obj;\n    this.showConfirmModal = true;\n  }\n\n  deleteProduct() {\n    api.delete('product/' + this.deleteObj.id).then(resp => {\n      this.$toast.success('Deleted ' + this.deleteObj.name);\n      this.getProducts();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n\n}\n",{"version":3,"sources":["all-products.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"all-products.vue","sourceRoot":"src/pages/products","sourcesContent":["<template>\n  <div id=\"all-products\">\n    <error-banner v-model=\"errorList\" />\n    <div class=\"toolbar\">\n      <app-button class=\"btn-push-right\" btnStyle=\"success\" icon=\"plus-circle\" route=\"/products/new-product\">New Product</app-button>\n    </div>\n    <panel>\n      <app-table :columns=\"columns\" :records=\"filteredProducts\">\n        <div\n          v-if=\"record.images && record.images.length\"\n          v-tooltip.right=\"{ ref: `productImage${record.id}` }\"\n          slot=\"image\"\n          slot-scope=\"{record}\"\n        >\n          <div :ref=\"`productImage${record.id}`\">\n            <data-image :fileName=\"record.images[0].name\" />\n          </div>\n          <data-image :fileName=\"record.images[0].name\" />\n        </div>\n        <app-button\n        slot=\"name\"\n        slot-scope=\"{record}\"\n        btnStyle=\"info-link\"\n        size=\"xs\"\n        :route=\"`/products/${record.id}/product-info`\"\n        >\n        {{record.name}}\n      </app-button>\n      <span slot=\"inventory\" slot-scope=\"{record}\" v-tooltip.top=\"{ ref: `inventory${record.id}` }\">\n        <badge>{{ countInventory(record.inventory, 'available') }}</badge>\n        <div :ref=\"`inventory${record.id}`\" class=\"tooltip-content inventory-tooltip\">\n          <span>On Hand: <span>{{ countInventory(record.inventory, 'onhand') }}</span></span>\n          <span>Reserved: <span>{{ countInventory(record.inventory, 'reserved') }}</span></span>\n        </div>\n      </span>\n      <span slot=\"prodId\" slot-scope=\"{record}\">\n        <span v-for=\"(item, index) in record.productIdentifiers\">\n          {{ item.name }}<span v-if=\"index !== record.productIdentifiers.length - 1\">, </span>\n        </span>\n      </span>\n      <badge v-if=\"record.status\" slot=\"status\" slot-scope=\"{record}\" badgeStyle=\"success\" badgeType=\"outline\">{{ record.status.name }}</badge>\n      <span slot=\"actions\" slot-scope=\"{ record }\">\n        <app-button btnStyle=\"link\" class=\"action-btn\" size=\"xs\" @click=\"showConfirm(record)\" icon=\"trash-alt\" />\n      </span>\n    </app-table>\n    <pagination :totalRecords=\"products.length\" @change=\"changePage\" />\n  </panel>\n  <confirmation-modal v-if=\"deleteObj\" @cancel=\"showConfirmModal = false\" @confirm=\"deleteProduct\" :open=\"showConfirmModal\">\n    Are you sure you want to delete {{ deleteObj.name }}?\n  </confirmation-modal>\n</div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, AppTable, TitleBar, AppButton, ErrorBanner, DataImage, Pagination, Badge } from '@/components';\nimport { ConfirmationModal } from '@/patterns';\nimport api from '@/api';\nimport { IProduct } from '@/interfaces';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    TitleBar,\n    AppButton,\n    ErrorBanner,\n    DataImage,\n    ConfirmationModal,\n    Pagination,\n    Badge\n  }\n})\nexport default class AllProducts extends Vue {\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  columns = [\n    { label: 'Picture', slotName: 'image', class: 'img-thumbnail' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp', filter: 'currency' },\n    { label: 'Inventory', slotName: 'inventory' },\n    { label: 'Product Identifiers', slotName: 'prodId' },\n    { label: 'Status', slotName: 'status' },\n    { label: 'Last Updated', selector: 'updatedOn', filter: 'date' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  showConfirmModal: boolean = false;\n  deleteObj: IProduct = {};\n\n  created() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n      this.filteredProducts = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  countInventory(inventory, field) {\n    let count = 0;\n    inventory.forEach(item => {\n      count += item[field];\n    });\n\n    return count;\n  }\n\n  changePage(range) {\n    let products = deepCopy(this.products);\n    if(products) {\n      this.filteredProducts = products.splice(range.start, range.end);\n    }\n  }\n\n  showConfirm(obj) {\n    this.deleteObj = obj;\n    this.showConfirmModal = true;\n  }\n\n  deleteProduct() {\n    api.delete('product/' + this.deleteObj.id).then(resp => {\n      this.$toast.success('Deleted ' + this.deleteObj.name);\n      this.getProducts();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n\n}\n</script>\n"]}]}