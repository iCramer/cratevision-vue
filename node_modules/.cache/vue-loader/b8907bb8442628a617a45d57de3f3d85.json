{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/new-product-order.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/new-product-order.vue","mtime":1564235953177},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport {\n  Panel,\n  AppTable,\n  AppButton,\n  ButtonGroup,\n  InputField,\n  InputValidate,\n  SelectBox,\n  Counter,\n  ListGroup,\n  ListGroupItem,\n  Badge,\n  SliderPanel,\n  Tab,\n  Accordion,\n  AccordionItem,\n  NoResults,\n  ErrorBanner,\n  FeeInput,\n  FeeEditor,\n  Modal,\n  DataImage,\n  StatusSelect,\n  SectionTitle,\n  Pagination,\n  TitleBar,\n  DatePicker\n} from '@/components';\nimport api from '@/api';\nimport { IProduct, IProductOrder, IFee, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport ProductOrderSummary from './product-order-summary.vue';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    AppButton,\n    ButtonGroup,\n    InputField,\n    InputValidate,\n    SelectBox,\n    Counter,\n    ListGroup,\n    ListGroupItem,\n    Badge,\n    SliderPanel,\n    Tab,\n    Accordion,\n    AccordionItem,\n    NoResults,\n    ErrorBanner,\n    FeeInput,\n    FeeEditor,\n    Modal,\n    ValidationObserver,\n    DataImage,\n    StatusSelect,\n    SectionTitle,\n    ProductOrderSummary,\n    Pagination,\n    TitleBar,\n    DatePicker\n  }\n})\nexport default class NewProductOrder extends Vue {\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  newProductOrder: IProductOrder = { fees: [], productQuantities: [] };\n  showFeeModal = false;\n  selectedProduct: IProduct = {};\n  showProdDetails = false;\n  productColumns = [\n    { label: 'Quantity', slotName: 'count' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp' },\n    { label: 'Status', slotName: 'status' }\n  ];\n  errorList: string[] = [];\n\n  created() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n      this.filteredProducts = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  findCountObj(id) {\n    let prodQty = this.newProductOrder.productQuantities;\n    return prodQty.find(item => item.product.id === id);\n  }\n\n  getCount(item) {\n    let countItem = this.findCountObj(item.id);\n    return countItem ? countItem.count : 0;\n  }\n\n  changeCount(val, item) {\n    let countItem = this.findCountObj(item.id);\n    let prodQty = this.newProductOrder.productQuantities;\n    let count = val !== '' ? parseInt(val) : 0;\n    if (countItem) {\n      if (count === 0) {\n        let index = prodQty.findIndex(obj => obj.product.id === item.id);\n        prodQty.splice(index, 1);\n      }\n      else {\n        countItem.count = count;\n      }\n    }\n    else {\n      prodQty.push({ count: count, product: item });\n    }\n  }\n\n  changePage(range) {\n    let products = deepCopy(this.products);\n    this.filteredProducts = products.splice(range.start, range.end);\n  }\n\n  openDetails(product) {\n    this.selectedProduct = product;\n    this.showProdDetails = true;\n  }\n\n  closeDetails(product) {\n    this.selectedProduct = {};\n    this.showProdDetails = false;\n  }\n\n  clearForm() {\n    this.newProductOrder = { productQuantities: [] };\n  }\n\n  submitForm() {\n    (this.$refs.newOrder as VForm).validate().then( valid => {\n      if(valid) {\n        api.post('productorder/', this.newProductOrder).then(resp => {\n          this.$toast.success('New product order created');\n          this.clearForm();\n        }).catch(error => {\n          this.errorList.push(error.response.data.message);\n        });\n      }\n      (this.$refs.newOrder as VForm).reset();\n    });\n  }\n}\n",{"version":3,"sources":["new-product-order.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"new-product-order.vue","sourceRoot":"src/pages/product-orders","sourcesContent":["<template>\n  <div>\n    <title-bar title=\"Product Orders\" btnBackLabel=\"Product Order History\" routeBack=\"/product-orders\"></title-bar>\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        <error-banner v-model=\"errorList\" />\n        <div class=\"col-md-5\">\n          <panel title=\"Order Information\">\n            <form>\n              <validation-observer ref=\"newOrder\">\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <input-validate name=\"orderId\" label=\"Order ID\" rules=\"required\" v-model.trim=\"newProductOrder.internalId\" />\n                  </div>\n                  <div class=\"col\">\n                    <date-picker label=\"Delivery Date\" v-model=\"newProductOrder.deliveredOn\" />\n                  </div>\n                </div>\n              </validation-observer>\n              <div class=\"row\">\n                <div class=\"col-md-12\">\n                  <fee-input v-model=\"newProductOrder.fees\" @edit-click=\"showFeeModal = true\" />\n                </div>\n                <div class=\"col-md-6\">\n                  <status-select v-model=\"newProductOrder.status\" />\n                </div>\n              </div>\n              <h5>Product Quantities</h5>\n              <app-table :columns=\"productColumns\" :records=\"products\">\n                <counter slot=\"count\" slot-scope=\"{record}\" :value=\"getCount(record)\" @input=\"(val) => changeCount(val, record)\"></counter>\n                <app-button slot=\"name\" slot-scope=\"{record}\" size=\"xs\" :linkBtn=\"true\" @click=\"openDetails(record)\">{{record.name}}</app-button>\n                <badge v-if=\"record.status\" slot=\"status\" slot-scope=\"{record}\" badgeType=\"outline\">{{record.status.name}}</badge>\n              </app-table>\n            </form>\n            <pagination :totalRecords=\"products.length\" @change=\"changePage\" />\n          </panel>\n        </div>\n        <div class=\"col-md-7\">\n          <panel title=\"Order Summary\">\n            <no-results v-if=\"!newProductOrder.productQuantities || !newProductOrder.productQuantities.length\" header=\"No Products Included\" body=\"Select product quantities from the products table to begin order\" :icon=\"['far', 'truck-loading']\"></no-results>\n            <div v-else>\n              <product-order-summary :order=\"newProductOrder\" />\n              <button-group align=\"center\">\n                <app-button :linkBtn=\"true\" @click=\"clearForm\">Cancel</app-button>\n                <app-button btnType=\"submit\" @click=\"submitForm\">Submit</app-button>\n              </button-group>\n            </div>\n          </panel>\n        </div>\n        <slider-panel title=\"Product Details\" :withTabs=\"true\" @close=\"closeDetails\" :open=\"showProdDetails\">\n          <tab title=\"Product Info\" tabKey=\"prod-info\">\n            <data-image v-if=\"selectedProduct.images && selectedProduct.images.length\" :fileName=\"selectedProduct.images[0].name\" />\n            <list-group title=\"Basic Info\">\n              <list-group-item icon=\"address-card\">\n                Name<span>{{selectedProduct.name}}</span>\n              </list-group-item>\n              <list-group-item icon=\"tag\">\n                MSRP<badge>{{selectedProduct.msrp}}</badge>\n              </list-group-item>\n              <list-group-item icon=\"ellipsis-h\">\n                Status<badge badgeType=\"outline\" v-if=\"selectedProduct.status\">{{selectedProduct.status.name}}</badge>\n              </list-group-item>\n            </list-group>\n            <list-group title=\"Fees\">\n              <list-group-item v-for=\"fee in selectedProduct.fees\" color=\"yellow\" icon=\"receipt\">\n                {{fee.name}}<badge>{{fee.amount | fee(fee.type)}}</badge>\n              </list-group-item>\n            </list-group>\n          </tab>\n          <tab title=\"Product Items\" tabKey=\"prod-items\">\n            <list-group>\n              <list-group-item v-for=\"item in selectedProduct.productItemQuantities\" :icon=\"['fal', 'barcode-read']\">\n                {{item.productItem.name}}<badge badgeStyle=\"info\">{{item.count}}</badge>\n              </list-group-item>\n            </list-group>\n          </tab>\n        </slider-panel>\n        <modal title=\"Edit Fees\" :open=\"showFeeModal\">\n          <fee-editor />\n          <button-group>\n            <app-button @click=\"showFeeModal = false\">Done</app-button>\n          </button-group>\n        </modal>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport {\n  Panel,\n  AppTable,\n  AppButton,\n  ButtonGroup,\n  InputField,\n  InputValidate,\n  SelectBox,\n  Counter,\n  ListGroup,\n  ListGroupItem,\n  Badge,\n  SliderPanel,\n  Tab,\n  Accordion,\n  AccordionItem,\n  NoResults,\n  ErrorBanner,\n  FeeInput,\n  FeeEditor,\n  Modal,\n  DataImage,\n  StatusSelect,\n  SectionTitle,\n  Pagination,\n  TitleBar,\n  DatePicker\n} from '@/components';\nimport api from '@/api';\nimport { IProduct, IProductOrder, IFee, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport ProductOrderSummary from './product-order-summary.vue';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    Panel,\n    AppTable,\n    AppButton,\n    ButtonGroup,\n    InputField,\n    InputValidate,\n    SelectBox,\n    Counter,\n    ListGroup,\n    ListGroupItem,\n    Badge,\n    SliderPanel,\n    Tab,\n    Accordion,\n    AccordionItem,\n    NoResults,\n    ErrorBanner,\n    FeeInput,\n    FeeEditor,\n    Modal,\n    ValidationObserver,\n    DataImage,\n    StatusSelect,\n    SectionTitle,\n    ProductOrderSummary,\n    Pagination,\n    TitleBar,\n    DatePicker\n  }\n})\nexport default class NewProductOrder extends Vue {\n  products: IProduct[] = [];\n  filteredProducts: IProduct[] = [];\n  newProductOrder: IProductOrder = { fees: [], productQuantities: [] };\n  showFeeModal = false;\n  selectedProduct: IProduct = {};\n  showProdDetails = false;\n  productColumns = [\n    { label: 'Quantity', slotName: 'count' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'MSRP', selector: 'msrp' },\n    { label: 'Status', slotName: 'status' }\n  ];\n  errorList: string[] = [];\n\n  created() {\n    this.getProducts();\n  }\n\n  getProducts() {\n    api.get('product/all').then(resp => {\n      this.products = resp.data;\n      this.filteredProducts = resp.data;\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  findCountObj(id) {\n    let prodQty = this.newProductOrder.productQuantities;\n    return prodQty.find(item => item.product.id === id);\n  }\n\n  getCount(item) {\n    let countItem = this.findCountObj(item.id);\n    return countItem ? countItem.count : 0;\n  }\n\n  changeCount(val, item) {\n    let countItem = this.findCountObj(item.id);\n    let prodQty = this.newProductOrder.productQuantities;\n    let count = val !== '' ? parseInt(val) : 0;\n    if (countItem) {\n      if (count === 0) {\n        let index = prodQty.findIndex(obj => obj.product.id === item.id);\n        prodQty.splice(index, 1);\n      }\n      else {\n        countItem.count = count;\n      }\n    }\n    else {\n      prodQty.push({ count: count, product: item });\n    }\n  }\n\n  changePage(range) {\n    let products = deepCopy(this.products);\n    this.filteredProducts = products.splice(range.start, range.end);\n  }\n\n  openDetails(product) {\n    this.selectedProduct = product;\n    this.showProdDetails = true;\n  }\n\n  closeDetails(product) {\n    this.selectedProduct = {};\n    this.showProdDetails = false;\n  }\n\n  clearForm() {\n    this.newProductOrder = { productQuantities: [] };\n  }\n\n  submitForm() {\n    (this.$refs.newOrder as VForm).validate().then( valid => {\n      if(valid) {\n        api.post('productorder/', this.newProductOrder).then(resp => {\n          this.$toast.success('New product order created');\n          this.clearForm();\n        }).catch(error => {\n          this.errorList.push(error.response.data.message);\n        });\n      }\n      (this.$refs.newOrder as VForm).reset();\n    });\n  }\n}\n</script>\n"]}]}