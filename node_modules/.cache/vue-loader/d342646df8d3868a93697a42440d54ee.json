{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/user-settings.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/user-settings.vue","mtime":1564235953187},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { TitleBar, Panel, ListGroup, ListGroupItem, FileUploader, SectionTitle, NoResults, ErrorBanner, Modal, AppButton, ButtonGroup, DataImage, InputValidate } from '@/components';\nimport { IUser, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    TitleBar,\n    Panel,\n    ListGroup,\n    ListGroupItem,\n    FileUploader,\n    SectionTitle,\n    NoResults,\n    ErrorBanner,\n    Modal,\n    AppButton,\n    ButtonGroup,\n    DataImage,\n    InputValidate,\n    ValidationObserver\n  }\n})\nexport default class UserSettings extends Vue {\n  user: IUser = {};\n  userEdit: IUser = {};\n  errorList: string[] = [];\n  showImageModal = false;\n  showInfoModal = false;\n\n  created() {\n    this.getUserInfo();\n  }\n\n  getUserInfo() {\n    api.get('user/').then( resp => {\n      this.user = resp.data;\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  openImageModal() {\n    this.showImageModal = true;\n  }\n\n  openInfoModal() {\n    this.userEdit = deepCopy(this.user);\n    this.showInfoModal = true;\n  }\n\n  closeImageModal() {\n    this.showImageModal = false;\n  }\n\n  closeInfoModal() {\n    this.showInfoModal = false;\n  }\n\n  submitImages() {\n    let body = { id: this.user.id, picture: this.userEdit.picture[0] };\n    this.submitForm(body);\n    this.closeImageModal();\n  }\n\n  submitInfo() {\n    (this.$refs.infoForm as VForm).validate().then( valid => {\n      if (valid) {\n        if(!this.userEdit.password) {\n          delete this.userEdit.password;\n        }\n        let body = this.userEdit;\n        this.submitForm(body);\n        this.closeInfoModal();\n      }\n    });\n  }\n\n  submitForm(body) {\n    api.put('user/', body).then( resp => {\n      this.user = resp.data;\n      this.getUserInfo();\n      this.$toast.success('User Updated');\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n",{"version":3,"sources":["user-settings.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-settings.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <title-bar title=\"User Settings\"></title-bar>\n    <div class=\"container-fluid\">\n      <error-banner v-model=\"errorList\" />\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <panel title=\"User Info\">\n            <list-group :iconList=\"true\" v-if=\"user\" title=\"Basic Info\" :showBtn=\"true\" @util-click=\"openInfoModal\">\n              <list-group-item icon=\"address-card\">\n                Name <span>{{user.firstName}} {{user.lastName}}</span>\n              </list-group-item>\n              <list-group-item icon=\"mailbox\">\n                Email <span>{{user.username}}</span>\n              </list-group-item>\n              <list-group-item icon=\"user-lock\">\n                Password <span>******</span>\n              </list-group-item>\n            </list-group>\n            <section-title :showBtn=\"true\" @util-click=\"openImageModal\">Picture</section-title>\n            <no-results v-if=\"!user.picture\" header=\"No User Picture\" btnLabel=\"Add Picture\" :icon=\"['far', 'images']\" @button-click=\"openImageModal\"></no-results>\n            <data-image v-else :fileName=\"user.picture.name\" />\n          </panel>\n          </div>\n      </div>\n    </div>\n    <modal title=\"Images\" :open=\"showImageModal\">\n      <form @submit.prevent=\"submitImages\">\n        <file-uploader v-model=\"userEdit.picture\" />\n        <button-group>\n          <app-button :linkBtn=\"true\" @click=\"closeImageModal\">Cancel</app-button>\n          <app-button btnType=\"submit\">Save</app-button>\n        </button-group>\n      </form>\n    </modal>\n    <modal title=\"Images\" :open=\"showInfoModal\">\n      <validation-observer ref=\"infoForm\">\n        <form @submit.prevent=\"submitInfo\">\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <input-validate v-model=\"userEdit.firstName\" rules=\"required\" label=\"First Name\" />\n            </div>\n            <div class=\"col-md-6\">\n              <input-validate v-model=\"userEdit.lastName\" rules=\"required\" label=\"Last Name\" />\n            </div>\n            <div class=\"col-md-6\">\n              <input-validate v-model=\"userEdit.username\" rules=\"required\" label=\"Email\" />\n            </div>\n          </div>\n          <button-group>\n            <app-button btnStyle=\"info-link\" @click=\"closeInfoModal\">Cancel</app-button>\n            <app-button btnType=\"submit\">Save</app-button>\n          </button-group>\n        </form>\n      </validation-observer>\n    </modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { TitleBar, Panel, ListGroup, ListGroupItem, FileUploader, SectionTitle, NoResults, ErrorBanner, Modal, AppButton, ButtonGroup, DataImage, InputValidate } from '@/components';\nimport { IUser, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    TitleBar,\n    Panel,\n    ListGroup,\n    ListGroupItem,\n    FileUploader,\n    SectionTitle,\n    NoResults,\n    ErrorBanner,\n    Modal,\n    AppButton,\n    ButtonGroup,\n    DataImage,\n    InputValidate,\n    ValidationObserver\n  }\n})\nexport default class UserSettings extends Vue {\n  user: IUser = {};\n  userEdit: IUser = {};\n  errorList: string[] = [];\n  showImageModal = false;\n  showInfoModal = false;\n\n  created() {\n    this.getUserInfo();\n  }\n\n  getUserInfo() {\n    api.get('user/').then( resp => {\n      this.user = resp.data;\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  openImageModal() {\n    this.showImageModal = true;\n  }\n\n  openInfoModal() {\n    this.userEdit = deepCopy(this.user);\n    this.showInfoModal = true;\n  }\n\n  closeImageModal() {\n    this.showImageModal = false;\n  }\n\n  closeInfoModal() {\n    this.showInfoModal = false;\n  }\n\n  submitImages() {\n    let body = { id: this.user.id, picture: this.userEdit.picture[0] };\n    this.submitForm(body);\n    this.closeImageModal();\n  }\n\n  submitInfo() {\n    (this.$refs.infoForm as VForm).validate().then( valid => {\n      if (valid) {\n        if(!this.userEdit.password) {\n          delete this.userEdit.password;\n        }\n        let body = this.userEdit;\n        this.submitForm(body);\n        this.closeInfoModal();\n      }\n    });\n  }\n\n  submitForm(body) {\n    api.put('user/', body).then( resp => {\n      this.user = resp.data;\n      this.getUserInfo();\n      this.$toast.success('User Updated');\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n</script>\n"]}]}