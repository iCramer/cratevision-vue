{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/components/top-bar.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/components/top-bar.vue","mtime":1566224161820},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport ErrorBanner from './error-banner.vue';\nimport AppButton from './button.vue';\nimport DataImage from './data-image.vue';\nimport api from '@/api';\n\n@Component({\n  components: { ErrorBanner, AppButton, DataImage }\n})\nexport default class TopBar extends Vue {\n  userInfo: any = {name: '', org: {name: ''}};\n  avatarOpen = false;\n  isLoggedIn = true;\n  initials = '';\n  errorList: string[] = [];\n\n  created() {\n    this.getUserInfo();\n    document.addEventListener('click', this.outsideClick);\n  }\n\n  destroyed () {\n    document.removeEventListener('click', this.outsideClick);\n  }\n\n  @Watch('$route')\n  routeChange() {\n    this.avatarOpen = false;\n  }\n\n  getUserInfo() {\n    api.get('/user/').then( resp => {\n      const user = resp.data;\n      this.userInfo = user,\n      this.initials = user.firstName.charAt(0) + user.lastName.charAt(0);\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  outsideClick(evt) {\n    let el: any = this.$refs.avatarMenu;\n    let target = evt.target;\n    if (el !== target && !el.contains(target)) {\n      this.avatarOpen = false;\n    }\n  }\n\n  logout() {\n    sessionStorage.removeItem('jwt');\n    this.$router.push('/login');\n  }\n}\n",{"version":3,"sources":["top-bar.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"top-bar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <header id=\"top-bar\">\n    <h4 id=\"top-bar-logo\">{{userInfo.org.name}}</h4>\n    <error-banner v-model=\"errorList\" />\n    <div class=\"right-content\">\n      <button type=\"button\" class=\"top-bar-btn\"><font-awesome-icon :icon=\"['far', 'bell']\" /></button>\n      <div class=\"avatar\" ref=\"avatarMenu\">\n        <button type=\"button\" class=\"avatar-btn\" @click=\"avatarOpen = !avatarOpen\">\n          <span v-if=\"!userInfo.picture\">{{initials}}</span>\n          <data-image v-else :fileName=\"userInfo.picture.name\" />\n        </button>\n        <transition name=\"fade\">\n          <div v-if=\"avatarOpen\" class=\"avatar-dd\">\n            <div class=\"avatar-dd-header\">\n              <div class=\"avatar-header-image\">\n                <span v-if=\"!userInfo.picture\">{{initials}}</span>\n                <data-image v-else :fileName=\"userInfo.picture.name\" />\n              </div>\n              <span class=\"name\">{{userInfo.firstName}} {{userInfo.lastName}}</span>\n              <span class=\"email\">{{userInfo.username}}</span>\n            </div>\n            <ul class=\"avatar-dd-body\">\n              <li><app-button route=\"/user-settings\" btnStyle=\"info-link\" icon=\"user-cog\">User Settings</app-button></li>\n              <li><app-button btnStyle=\"info-link\" icon=\"sign-out-alt\" @click=\"logout\">Logout</app-button></li>\n            </ul>\n          </div>\n        </transition>\n      </div>\n    </div>\n  </header>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport ErrorBanner from './error-banner.vue';\nimport AppButton from './button.vue';\nimport DataImage from './data-image.vue';\nimport api from '@/api';\n\n@Component({\n  components: { ErrorBanner, AppButton, DataImage }\n})\nexport default class TopBar extends Vue {\n  userInfo: any = {name: '', org: {name: ''}};\n  avatarOpen = false;\n  isLoggedIn = true;\n  initials = '';\n  errorList: string[] = [];\n\n  created() {\n    this.getUserInfo();\n    document.addEventListener('click', this.outsideClick);\n  }\n\n  destroyed () {\n    document.removeEventListener('click', this.outsideClick);\n  }\n\n  @Watch('$route')\n  routeChange() {\n    this.avatarOpen = false;\n  }\n\n  getUserInfo() {\n    api.get('/user/').then( resp => {\n      const user = resp.data;\n      this.userInfo = user,\n      this.initials = user.firstName.charAt(0) + user.lastName.charAt(0);\n    }).catch( error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  outsideClick(evt) {\n    let el: any = this.$refs.avatarMenu;\n    let target = evt.target;\n    if (el !== target && !el.contains(target)) {\n      this.avatarOpen = false;\n    }\n  }\n\n  logout() {\n    sessionStorage.removeItem('jwt');\n    this.$router.push('/login');\n  }\n}\n</script>\n"]}]}