{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/products/product-items.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/products/product-items.vue","mtime":1582820051562},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, ListGroup, ListGroupItem, AppTable, Badge, AppButton, Modal, ErrorBanner, DataImage, Pagination, FileImport } from '@/components';\nimport ProductItemPanel from './product-item-panel.vue';\nimport NewProductItem from './product-items/new-product-item.vue';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { IProduct, IProductItem, IProductItemQuantity } from '@/interfaces';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    ListGroup,\n    ListGroupItem,\n    AppTable,\n    AppButton,\n    Badge,\n    ProductItemPanel,\n    Modal,\n    NewProductItem,\n    ErrorBanner,\n    DataImage,\n    Pagination,\n    ConfirmationModal,\n    FileImport\n  }\n})\nexport default class ProductItems extends Vue {\n  productItems: IProductItem[] = [];\n  filteredProductItems: IProductItem[] = [];\n  selectedItem = {};\n  showDetails = false;\n  showModal = false;\n  columns = [\n    { label: 'Picture', slotName: 'image', class: 'img-thumbnail' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'Case Quantity', selector: 'caseQty' },\n    { label: 'Case Cost', selector: 'caseCost', filter: 'currency' },\n    { label: 'Item Cost', selector: 'itemCost', filter: 'currency' },\n    { label: 'Supplier', selector: 'supplier.name' },\n    { label: 'Inventory', slotName: 'inventory' },\n    { label: 'Product Identifiers', slotName: 'prodId' },\n    { label: 'Last Updated', selector: 'updatedOn', filter: 'date' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  showConfirmModal: boolean = false;\n  deleteObj: IProduct = {};\n\n  created() {\n    this.getProductItems();\n  }\n\n  getProductItems() {\n    api.get('productitem/all').then(resp => {\n      this.productItems = resp.data;\n      this.filteredProductItems = resp.data;\n    }).catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  openDetails(obj) {\n    this.showDetails = true;\n    this.selectedItem = obj;\n  }\n\n  closeDetails() {\n    this.showDetails = false;\n    this.selectedItem = {};\n  }\n\n  openModal() {\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n  }\n\n  saveNewItem(value) {\n    api.post('productitem/', value).then(resp => {\n      this.getProductItems();\n      this.$toast.success('Product Item Created');\n    }).catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  countInventory(inventory, field) {\n    let count = 0;\n    inventory.forEach(item => {\n      let test = \"this\";\n      count += item[field];\n    });\n\n    return count;\n  }\n\n  changePage(range) {\n    let productItems = deepCopy(this.productItems);\n    if(productItems) {\n      this.filteredProductItems = productItems.splice(range.start, range.end);\n    }\n  }\n\n  showConfirm(obj) {\n    this.deleteObj = obj;\n    this.showConfirmModal = true;\n  }\n\n  deleteProductItem() {\n    api.delete('productitem/' + this.deleteObj.id).then(resp => {\n      this.$toast.success('Deleted ' + this.deleteObj.name);\n      this.getProductItems();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n}\n",{"version":3,"sources":["product-items.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"product-items.vue","sourceRoot":"src/pages/products","sourcesContent":["<template>\n  <div>\n    <error-banner v-model=\"errorList\" />\n    <div class=\"toolbar\">\n      <app-button class=\"btn-push-right\" btnStyle=\"success\" icon=\"plus-circle\" @click=\"openModal\">New Product Item</app-button>\n      <!-- <app-button class=\"btn-push-right\" btnStyle=\"link\" icon=\"cloud-upload\" @click=\"openModal\">Import CSV</app-button> -->\n      <file-import></file-import>\n    </div>\n    <panel>\n      <app-table :records=\"filteredProductItems\" :columns=\"columns\">\n        <div\n          v-if=\"record.picture\"\n          v-tooltip.right=\"{ ref: `productImage${record.id}` }\"\n          slot=\"image\"\n          slot-scope=\"{record}\"\n        >\n          <div :ref=\"`productImage${record.id}`\">\n            <data-image :fileName=\"record.picture.name\" />\n          </div>\n          <data-image :fileName=\"record.picture.name\" />\n        </div>\n        <app-button slot=\"name\" slot-scope=\"{record}\" size=\"xs\" :linkBtn=\"true\" @click=\"openDetails(record)\">{{record.name}}</app-button>\n        <span slot=\"inventory\" slot-scope=\"{record}\" v-tooltip.top=\"{ ref: `inventory${record.id}` }\">\n          <badge>{{ countInventory(record.inventory, 'available') }}</badge>\n          <div :ref=\"`inventory${record.id}`\" class=\"tooltip-content inventory-tooltip\">\n            <span>On Hand: <span>{{ countInventory(record.inventory, 'onhand') }}</span></span>\n            <span>Reserved: <span>{{ countInventory(record.inventory, 'reserved') }}</span></span>\n          </div>\n        </span>\n        <span slot=\"prodId\" slot-scope=\"{record}\">\n          <span v-for=\"(item, index) in record.productIdentifiers\">\n            {{ item.name }}<span v-if=\"index !== record.productIdentifiers.length - 1\">, </span>\n          </span>\n        </span>\n        <span slot=\"actions\" slot-scope=\"{ record }\">\n          <app-button btnStyle=\"link\" class=\"action-btn\" size=\"xs\" @click=\"showConfirm(record)\" icon=\"trash-alt\" />\n        </span>\n      </app-table>\n      <pagination :totalRecords=\"productItems.length\" @change=\"changePage\" />\n    </panel>\n    <confirmation-modal v-if=\"deleteObj\" @cancel=\"showConfirmModal = false\" @confirm=\"deleteProductItem\" :open=\"showConfirmModal\">\n      Are you sure you want to delete {{ deleteObj.name }}?\n    </confirmation-modal>\n    <product-item-panel :open=\"showDetails\" @close=\"closeDetails()\" :item=\"selectedItem\" />\n    <modal size=\"lg\" title=\"New Product Item\" :open=\"showModal\">\n      <new-product-item @cancel=\"closeModal\" @submit=\"saveNewItem\" />\n    </modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, ListGroup, ListGroupItem, AppTable, Badge, AppButton, Modal, ErrorBanner, DataImage, Pagination, FileImport } from '@/components';\nimport ProductItemPanel from './product-item-panel.vue';\nimport NewProductItem from './product-items/new-product-item.vue';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { IProduct, IProductItem, IProductItemQuantity } from '@/interfaces';\nimport { ConfirmationModal } from '@/patterns';\n\n@Component({\n  components: {\n    Panel,\n    ListGroup,\n    ListGroupItem,\n    AppTable,\n    AppButton,\n    Badge,\n    ProductItemPanel,\n    Modal,\n    NewProductItem,\n    ErrorBanner,\n    DataImage,\n    Pagination,\n    ConfirmationModal,\n    FileImport\n  }\n})\nexport default class ProductItems extends Vue {\n  productItems: IProductItem[] = [];\n  filteredProductItems: IProductItem[] = [];\n  selectedItem = {};\n  showDetails = false;\n  showModal = false;\n  columns = [\n    { label: 'Picture', slotName: 'image', class: 'img-thumbnail' },\n    { label: 'Name', slotName: 'name' },\n    { label: 'Case Quantity', selector: 'caseQty' },\n    { label: 'Case Cost', selector: 'caseCost', filter: 'currency' },\n    { label: 'Item Cost', selector: 'itemCost', filter: 'currency' },\n    { label: 'Supplier', selector: 'supplier.name' },\n    { label: 'Inventory', slotName: 'inventory' },\n    { label: 'Product Identifiers', slotName: 'prodId' },\n    { label: 'Last Updated', selector: 'updatedOn', filter: 'date' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  showConfirmModal: boolean = false;\n  deleteObj: IProduct = {};\n\n  created() {\n    this.getProductItems();\n  }\n\n  getProductItems() {\n    api.get('productitem/all').then(resp => {\n      this.productItems = resp.data;\n      this.filteredProductItems = resp.data;\n    }).catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n\n  openDetails(obj) {\n    this.showDetails = true;\n    this.selectedItem = obj;\n  }\n\n  closeDetails() {\n    this.showDetails = false;\n    this.selectedItem = {};\n  }\n\n  openModal() {\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n  }\n\n  saveNewItem(value) {\n    api.post('productitem/', value).then(resp => {\n      this.getProductItems();\n      this.$toast.success('Product Item Created');\n    }).catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  countInventory(inventory, field) {\n    let count = 0;\n    inventory.forEach(item => {\n      let test = \"this\";\n      count += item[field];\n    });\n\n    return count;\n  }\n\n  changePage(range) {\n    let productItems = deepCopy(this.productItems);\n    if(productItems) {\n      this.filteredProductItems = productItems.splice(range.start, range.end);\n    }\n  }\n\n  showConfirm(obj) {\n    this.deleteObj = obj;\n    this.showConfirmModal = true;\n  }\n\n  deleteProductItem() {\n    api.delete('productitem/' + this.deleteObj.id).then(resp => {\n      this.$toast.success('Deleted ' + this.deleteObj.name);\n      this.getProductItems();\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n\n    this.showConfirmModal = false;\n  }\n}\n</script>\n"]}]}