{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/suppliers.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/configuration/suppliers.vue","mtime":1564234828732},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, ErrorBanner, AppButton, ButtonGroup, Modal, AppTable, Pagination } from '@/components';\nimport { ISupplier, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\nimport SupplierForm from '@/pages/products/product-items/supplier-form.vue';\n\n@Component({\n  components: {\n    Panel,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    ConfirmationModal,\n    SupplierForm\n  }\n})\nexport default class Suppliers extends Vue {\n  suppliers: ISupplier[] = [];\n  editItem: ISupplier = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Location', slotName: 'location' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: ISupplier = {};\n\n  created() {\n    this.getSuppliers();\n    this.resetEditItem();\n  }\n\n  getSuppliers() {\n    api.get('supplier/all').then( resp => {\n      this.suppliers = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      if(!obj.address) {\n        obj.address = {};\n      }\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = { address: {} };\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('supplier/', this.editItem).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('supplier/' + this.editItem.id, this.editItem).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteSupplier() {\n    api.delete('supplier/' + this.deleteItem.id).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n",{"version":3,"sources":["suppliers.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"suppliers.vue","sourceRoot":"src/pages/configuration","sourcesContent":["<template>\n  <div>\n    <error-banner v-model=\"errorList\" />\n    <div class=\"toolbar\">\n      <app-button class=\"btn-push-right\" btnStyle=\"success\" icon=\"plus-circle\" @click=\"openModal()\">New Supplier</app-button>\n    </div>\n    <panel title=\"Suppliers\">\n      <app-table :columns=\"columns\" :records=\"suppliers\">\n        <div slot=\"location\" slot-scope=\"{record}\">\n          <span v-if=\"record.address\">\n            {{ record.address.addressLine1 }} {{ record.address.addressLine2 }} {{ record.address.city }}, {{ record.address.state }} {{ record.address.zipCode }} {{ record.address.country }}\n          </span>\n        </div>\n        <span slot=\"actions\" slot-scope=\"{record}\">\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"showConfirm(record)\" icon=\"trash-alt\" />\n          <app-button btnStyle=\"info-link\" class=\"action-btn\" size=\"xs\" @click=\"openModal(record)\" icon=\"edit\" />\n        </span>\n      </app-table>\n      <pagination :totalRecords=\"suppliers.length\" />\n    </panel>\n    <modal title=\"Supplier\" :open=\"showModal\">\n      <validation-observer ref=\"form\">\n        <form @submit.prevent=\"submitForm\">\n          <supplier-form v-model=\"editItem\" />\n          <button-group>\n            <app-button @click=\"closeModal\" btnStyle=\"info-link\">Cancel</app-button>\n            <app-button btnType=\"submit\">Submit</app-button>\n          </button-group>\n        </form>\n      </validation-observer>\n    </modal>\n    <confirmation-modal v-if=\"deleteItem\" @cancel=\"showConfirmModal = false\" @confirm=\"deleteSupplier\" :open=\"showConfirmModal\">\n      Are you sure you want to delete {{ deleteItem.name }}?\n    </confirmation-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { Panel, ErrorBanner, AppButton, ButtonGroup, Modal, AppTable, Pagination } from '@/components';\nimport { ISupplier, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport api from '@/api';\nimport deepCopy from '@/utils';\nimport { ConfirmationModal } from '@/patterns';\nimport SupplierForm from '@/pages/products/product-items/supplier-form.vue';\n\n@Component({\n  components: {\n    Panel,\n    ErrorBanner,\n    AppButton,\n    ButtonGroup,\n    ValidationObserver,\n    Modal,\n    AppTable,\n    Pagination,\n    ConfirmationModal,\n    SupplierForm\n  }\n})\nexport default class Suppliers extends Vue {\n  suppliers: ISupplier[] = [];\n  editItem: ISupplier = {};\n  showModal = false;\n  columns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Location', slotName: 'location' },\n    { label: 'Actions', slotName: 'actions' }\n  ];\n  errorList: string[] = [];\n  isEdit = false;\n  showConfirmModal = false;\n  deleteItem: ISupplier = {};\n\n  created() {\n    this.getSuppliers();\n    this.resetEditItem();\n  }\n\n  getSuppliers() {\n    api.get('supplier/all').then( resp => {\n      this.suppliers = resp.data;\n    })\n  }\n\n  openModal(obj) {\n    if(obj) {\n      if(!obj.address) {\n        obj.address = {};\n      }\n      this.editItem = deepCopy(obj);\n      this.isEdit = true;\n    }\n    this.showModal = true;\n  }\n\n  closeModal() {\n    this.showModal = false;\n    this.resetEditItem();\n    this.isEdit = false;\n  }\n\n  showConfirm(obj) {\n    this.deleteItem = obj;\n    this.showConfirmModal = true;\n  }\n\n  hideConfirm() {\n    this.showConfirmModal = false;\n    this.deleteItem = {};\n  }\n\n  resetEditItem() {\n    this.editItem = { address: {} };\n  }\n\n  submitForm() {\n    (this.$refs.form as VForm).validate().then( valid => {\n      if(valid) {\n        if(this.isEdit) {\n          this.submitEdit();\n        }\n        else {\n          this.submitNew();\n        }\n      }\n    });\n  }\n\n  submitNew() {\n    api.post('supplier/', this.editItem).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Added');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.closeModal();\n  }\n\n  submitEdit() {\n    api.put('supplier/' + this.editItem.id, this.editItem).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Updated');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n    this.isEdit = false;\n    this.closeModal();\n  }\n\n  deleteSupplier() {\n    api.delete('supplier/' + this.deleteItem.id).then( resp => {\n      this.getSuppliers();\n      this.$toast.success('Supplier Deleted');\n    })\n    .catch(error => {\n      this.errorList.push(error.response.data.message);\n    });\n  }\n}\n</script>\n"]}]}