{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/auth/register-org.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/auth/register-org.vue","mtime":1566224143628},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["import _classCallCheck from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Vue } from 'vue-property-decorator';\nimport { InputField, InputValidate, Panel, AppButton, ProgressTracker, ProgressTrackerStep, ErrorBanner } from '@/components';\nimport api from '@/api';\nimport { ValidationObserver } from 'vee-validate';\nimport deepCopy from '@/utils';\n\nvar RegisterOrg =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(RegisterOrg, _Vue);\n\n  function RegisterOrg() {\n    var _this;\n\n    _classCallCheck(this, RegisterOrg);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RegisterOrg).apply(this, arguments));\n    _this.org = {\n      address: {}\n    };\n    _this.user = {};\n    _this.errorList = [];\n    _this.validate = {\n      user: undefined,\n      createOrg: undefined\n    };\n    return _this;\n  }\n\n  _createClass(RegisterOrg, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.validate.user = this.$refs.user.validate;\n      this.validate.createOrg = this.$refs.createOrg.validate;\n    }\n  }, {\n    key: \"submitUser\",\n    value: function submitUser() {\n      var _this2 = this;\n\n      this.$refs.user.validate().then(function (valid) {\n        if (valid) {\n          var body = deepCopy(_this2.user);\n          delete body.confirmPassword;\n          api.post('/user/', body).then(function (resp) {\n            var token = resp.headers.authorization;\n            sessionStorage.setItem('jwt', token);\n            _this2.newUserId = resp.data.id;\n          }).catch(function (error) {\n            _this2.errorList.push(error.response.data.message);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"submitOrg\",\n    value: function submitOrg() {\n      var _this3 = this;\n\n      this.$refs.orgIfno.validate().then(function (valid) {\n        if (valid) {\n          api.post('organization/', _this3.org).then(function (resp) {\n            var body = {\n              id: _this3.newUserId,\n              org: {\n                id: resp.data.id\n              }\n            };\n            api.put('user', body).then(function (resp) {\n              _this3.$router.push('/dashboard');\n            }).catch(function (error) {\n              _this3.errorList.push(error.response.data.message);\n            });\n          }).catch(function (error) {\n            _this3.errorList.push(error.response.data.message);\n          });\n        }\n      });\n    }\n  }]);\n\n  return RegisterOrg;\n}(Vue);\n\nRegisterOrg = tslib_1.__decorate([Component({\n  components: {\n    InputField: InputField,\n    Panel: Panel,\n    AppButton: AppButton,\n    InputValidate: InputValidate,\n    ValidationObserver: ValidationObserver,\n    ProgressTracker: ProgressTracker,\n    ProgressTrackerStep: ProgressTrackerStep,\n    ErrorBanner: ErrorBanner\n  }\n})], RegisterOrg);\nexport default RegisterOrg;",{"version":3,"sources":["/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/auth/register-org.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\nimport { InputField, InputValidate, Panel, AppButton, ProgressTracker, ProgressTrackerStep, ErrorBanner } from '@/components';\nimport api from '@/api';\nimport { IOrganization, IUser, VForm } from '@/interfaces';\nimport { ValidationObserver } from 'vee-validate';\nimport deepCopy from '@/utils';\n\n@Component({\n  components: {\n    InputField,\n    Panel,\n    AppButton,\n    InputValidate,\n    ValidationObserver,\n    ProgressTracker,\n    ProgressTrackerStep,\n    ErrorBanner\n  }\n})\nexport default class RegisterOrg extends Vue {\n  org: IOrganization = { address: {} };\n  user: IUser = {};\n  errorList: string[] = [];\n  validate = {\n    user: undefined,\n    createOrg: undefined\n  }\n  newUserId: number;\n\n  mounted() {\n    this.validate.user = (this.$refs.user as VForm).validate;\n    this.validate.createOrg = (this.$refs.createOrg as VForm).validate;\n  }\n\n  submitUser() {\n    (this.$refs.user as VForm).validate().then( valid => {\n      if(valid) {\n        let body = deepCopy(this.user);\n        delete body.confirmPassword;\n        api.post('/user/', body).then(resp => {\n          const token = resp.headers.authorization;\n          sessionStorage.setItem('jwt', token);\n          this.newUserId = resp.data.id;\n        }).catch( error => {\n          this.errorList.push(error.response.data.message);\n        });\n      }\n    });\n  }\n\n  submitOrg() {\n    (this.$refs.orgIfno as VForm).validate().then( valid => {\n      if(valid) {\n        api.post('organization/', this.org).then(resp => {\n          let body = { id: this.newUserId, org: { id: resp.data.id } };\n          api.put('user', body).then(resp => {\n            this.$router.push('/dashboard');\n          }).catch( error => {\n            this.errorList.push(error.response.data.message);\n          });\n        }).catch( error => {\n          this.errorList.push(error.response.data.message);\n        });\n      }\n    });\n  }\n}\n"],"sourceRoot":""}]}