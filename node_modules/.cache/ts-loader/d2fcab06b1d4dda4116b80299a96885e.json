{"remainingRequest":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js??ref--14-2!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/product-order-summary.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/product-order-summary.vue","mtime":1564106701972},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1557780376697},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-plugin-typescript/node_modules/ts-loader/index.js","mtime":1557881577950},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1557780378880},{"path":"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1557780379303}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _classCallCheck from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/iancramer/GitHub/bundlevo-vue/node_modules/@babel/runtime-corejs2/helpers/esm/inherits\";\nimport * as tslib_1 from \"tslib\";\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { Accordion, AccordionItem, Badge, ListGroup, ListGroupItem, AppTable } from '@/components';\n\nvar ProductOrderSummary =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(ProductOrderSummary, _Vue);\n\n  function ProductOrderSummary() {\n    var _this;\n\n    _classCallCheck(this, ProductOrderSummary);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ProductOrderSummary).apply(this, arguments));\n    _this.orderSummary = [];\n    _this.totalProdItemQty = [];\n    _this.summaryColumns = [{\n      label: 'Name',\n      selector: 'name'\n    }, {\n      label: 'Total Quantity',\n      selector: 'totalItemQty'\n    }, {\n      label: 'Cases Needed',\n      selector: 'casesNeeded'\n    }, {\n      label: 'Overstock',\n      selector: 'overstock'\n    }, {\n      label: 'Cost',\n      slotName: 'cost'\n    }];\n    return _this;\n  }\n\n  _createClass(ProductOrderSummary, [{\n    key: \"mounted\",\n    value: function mounted() {\n      this.calculateProdCost();\n    }\n  }, {\n    key: \"updateSummary\",\n    value: function updateSummary() {\n      this.calculateProdCost();\n    }\n  }, {\n    key: \"calculateProdCost\",\n    value: function calculateProdCost() {\n      var _this2 = this;\n\n      this.orderSummary = [];\n      this.totalProdItemQty = [];\n      this.order.productQuantities.forEach(function (prodQty) {\n        var summaryItem = {\n          product: prodQty.product,\n          quantity: prodQty.count,\n          totalCost: 0,\n          prodItems: []\n        };\n        prodQty.product.productItemQuantities.forEach(function (prodItemQty) {\n          var totalItemQty = prodItemQty.count * prodQty.count;\n          var casesNeeded = Math.ceil(totalItemQty / prodItemQty.productItem.caseQty);\n          var overstock = totalItemQty % prodItemQty.productItem.caseQty;\n          var totalCost = casesNeeded * prodItemQty.productItem.caseCost;\n          summaryItem.prodItems.push({\n            name: prodItemQty.productItem.name,\n            totalItemQty: totalItemQty,\n            casesNeeded: casesNeeded,\n            overstock: overstock,\n            totalCost: totalCost\n          });\n          summaryItem.totalCost += totalCost;\n\n          var item = _this2.totalProdItemQty.find(function (x) {\n            return x.id === prodItemQty.productItem.id;\n          });\n\n          if (item) {\n            item.totalItemQty += totalItemQty;\n            item.totalCost += totalCost;\n            item.casesNeeded += casesNeeded;\n            item.overstock = item.totalItemQty % prodItemQty.productItem.caseQty;\n          } else {\n            _this2.totalProdItemQty.push({\n              id: prodItemQty.productItem.id,\n              name: prodItemQty.productItem.name,\n              totalItemQty: totalItemQty,\n              casesNeeded: casesNeeded,\n              totalCost: totalCost,\n              overstock: overstock\n            });\n          }\n        });\n\n        _this2.orderSummary.push(summaryItem);\n      });\n    }\n  }, {\n    key: \"getTotalCost\",\n    value: function getTotalCost() {\n      var cost = 0;\n      this.orderSummary.forEach(function (product) {\n        cost += product.totalCost;\n      });\n      var feeCost = 0;\n      this.order.fees.forEach(function (fee) {\n        if (fee.type === 'PERCENTAGE') {\n          feeCost += fee.amount / 100 * cost;\n        } else {\n          feeCost += fee.amount;\n        }\n      });\n      return cost + feeCost;\n    }\n  }]);\n\n  return ProductOrderSummary;\n}(Vue);\n\ntslib_1.__decorate([Prop({\n  default: {}\n})], ProductOrderSummary.prototype, \"order\", void 0);\n\ntslib_1.__decorate([Watch('order', {\n  deep: true\n})], ProductOrderSummary.prototype, \"updateSummary\", null);\n\nProductOrderSummary = tslib_1.__decorate([Component({\n  components: {\n    Accordion: Accordion,\n    AccordionItem: AccordionItem,\n    Badge: Badge,\n    ListGroup: ListGroup,\n    ListGroupItem: ListGroupItem,\n    AppTable: AppTable\n  }\n})], ProductOrderSummary);\nexport default ProductOrderSummary;",{"version":3,"sources":["/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/iancramer/GitHub/bundlevo-vue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/iancramer/GitHub/bundlevo-vue/src/pages/product-orders/product-order-summary.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue, Watch } from 'vue-property-decorator';\nimport { Accordion, AccordionItem, Badge, ListGroup, ListGroupItem, AppTable } from '@/components';\nimport { IProductOrder } from '@/interfaces';\n\n@Component({\n  components: {\n    Accordion,\n    AccordionItem,\n    Badge,\n    ListGroup,\n    ListGroupItem,\n    AppTable\n  }\n})\nexport default class ProductOrderSummary extends Vue {\n  @Prop({default: {}}) order: IProductOrder;\n  orderSummary = [];\n  totalProdItemQty = [];\n  summaryColumns = [\n    { label: 'Name', selector: 'name' },\n    { label: 'Total Quantity', selector: 'totalItemQty' },\n    { label: 'Cases Needed', selector: 'casesNeeded' },\n    { label: 'Overstock', selector: 'overstock' },\n    { label: 'Cost', slotName: 'cost' }\n  ];\n\n  mounted() {\n    this.calculateProdCost();\n  }\n\n  @Watch('order', {deep: true})\n  updateSummary() {\n    this.calculateProdCost();\n  }\n\n  calculateProdCost() {\n    this.orderSummary = [];\n    this.totalProdItemQty = [];\n    this.order.productQuantities.forEach( prodQty => {\n      let summaryItem: any = {product: prodQty.product, quantity: prodQty.count, totalCost: 0, prodItems: [] };\n      prodQty.product.productItemQuantities.forEach( prodItemQty => {\n        let totalItemQty = prodItemQty.count * prodQty.count;\n        let casesNeeded = Math.ceil(totalItemQty / prodItemQty.productItem.caseQty);\n        let overstock = totalItemQty % prodItemQty.productItem.caseQty;\n        let totalCost = casesNeeded * prodItemQty.productItem.caseCost;\n\n        summaryItem.prodItems.push({\n          name: prodItemQty.productItem.name,\n          totalItemQty: totalItemQty,\n          casesNeeded: casesNeeded,\n          overstock: overstock,\n          totalCost: totalCost\n        });\n        summaryItem.totalCost += totalCost;\n\n        let item = this.totalProdItemQty.find(x => x.id === prodItemQty.productItem.id);\n        if(item) {\n          item.totalItemQty += totalItemQty;\n          item.totalCost += totalCost;\n          item.casesNeeded += casesNeeded;\n          item.overstock = (item.totalItemQty % prodItemQty.productItem.caseQty);\n        }\n        else {\n          this.totalProdItemQty.push({\n            id: prodItemQty.productItem.id,\n            name: prodItemQty.productItem.name,\n            totalItemQty: totalItemQty,\n            casesNeeded: casesNeeded,\n            totalCost: totalCost,\n            overstock: overstock\n          });\n        }\n      });\n\n      this.orderSummary.push(summaryItem);\n    });\n  }\n\n  getTotalCost() {\n    let cost = 0;\n    this.orderSummary.forEach( product => {\n      cost += product.totalCost;\n    });\n    let feeCost = 0;\n    this.order.fees.forEach( fee => {\n      if(fee.type === 'PERCENTAGE') {\n        feeCost += (fee.amount / 100) * cost;\n      }\n      else {\n        feeCost += fee.amount;\n      }\n    });\n\n    return cost + feeCost;\n  }\n}\n"],"sourceRoot":""}]}